<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">

    <!-- Basic -->
    <title>Forms | Vulcan Docs</title>
    <meta name="description" content="">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="shortcut icon" type="image/png" href="images/favicon.ico" sizes="16x16 32x32 64x64">

    <!-- Social -->
    <meta property="og:type" content="article">
    <meta property="og:url" content="http://docs.vulcanjs.org">
    <meta property="og:title" content="Forms | Vulcan Docs">
    <meta property="og:description" content="">
    <meta property="og:image" content="">
    <meta name="twitter:card" content="summary_image_large">
    <meta name="twitter:site" content="@telescopeapp">
    <meta name="twitter:title" content="Forms | Vulcan Docs">
    <meta name="twitter:description" content="">
    <meta name="twitter:image" content="">

    <!-- Misc -->
    <meta name="google-site-verification" content="" />
    <link href='https://fonts.googleapis.com/css?family=Source+Sans+Pro:400,300,200,300italic,400italic' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" href="/style/style.css">

    <link rel="stylesheet" href="https://cdn.jsdelivr.net/docsearch.js/2/docsearch.min.css" />


  </head>
  <body class="">
    

<div class="nav dark">
  <div class="nav-group">
    <div class="nav-item show-mobile">
      <span class="js-sidebar-toggle ">
        <span class="icon-menu"></span>
      </span>
    </div>
    <div class="nav-item">
      <a class="logo-wrapper" href="http://docs.vulcanjs.org/" title="Vulcan Documentation Vulcan Documentation"  >
        <img src="/images/vulcan-logo-border-2.svg" alt="Vulcan Documentation" class="logo"/>
        <span>Vulcan Documentation</span>
      </a>
    </div>
  </div>

  <div class="nav-group right">

    <div class="nav-item wrapper-search">
      <div class="input-symbol small round">
        <input type="text" placeholder="Search Vulcan Docs" id="desktop-search-input" />
        <span class="icon-search"></span>
      </div>
      <div class="wrapper-desktop-search-results"></div>
    </div>

    
      
      <div class="nav-item show-desktop false ">
        <a class="link" href="https://github.com/vulcanjs/vulcan"  >
          <span>GitHub</span>
        </a>
      </div>
    
      
      <div class="nav-item show-desktop false ">
        <a class="link" href="http://slack.telescopeapp.org"  >
          <span>Slack</span>
        </a>
      </div>
    
  </div>
</div>

<div class="sidebar">
  <div class="panel">
    <div class="panel-item">
      <a class="" href="http://docs.vulcanjs.org/" title="Vulcan Documentation"  >
        <span>Vulcan Documentation Vulcan Documentation</span>
      </a>
    </div>
    
      <div class="panel-item "">
        <a class="" href="https://github.com/vulcanjs/vulcan"  >
          <span>GitHub</span>
        </a>
      </div>
    
      <div class="panel-item "">
        <a class="" href="http://slack.telescopeapp.org"  >
          <span>Slack</span>
        </a>
      </div>
    
  </div>

  <div class="sidebar-content">
    <div class="topcap">
      
    </div>

    <ul class="toc">
      
        <li>
          
          <ul class="list-toc">
            
              
              <li class="item-toc ">
                <a href="index.html" class="sidebar-link ">
                  <span>Introduction</span>
                </a>
              </li>
            
          </ul>
        </li>
      
        <li>
          
            <div class="heading-toc">Overview</div>
          
          <ul class="list-toc">
            
              
              <li class="item-toc ">
                <a href="features.html" class="sidebar-link ">
                  <span>Features</span>
                </a>
              </li>
            
              
              <li class="item-toc ">
                <a href="architecture.html" class="sidebar-link ">
                  <span>Architecture</span>
                </a>
              </li>
            
              
              <li class="item-toc ">
                <a href="vulcan.html" class="sidebar-link ">
                  <span>From Telescope to Vulcan</span>
                </a>
              </li>
            
              
              <li class="item-toc ">
                <a href="packages.html" class="sidebar-link ">
                  <span>Packages</span>
                </a>
              </li>
            
              
              <li class="item-toc ">
                <a href="common-problems.html" class="sidebar-link ">
                  <span>Common Problems</span>
                </a>
              </li>
            
          </ul>
        </li>
      
        <li>
          
            <div class="heading-toc">Data Layer</div>
          
          <ul class="list-toc">
            
              
              <li class="item-toc ">
                <a href="schemas.html" class="sidebar-link ">
                  <span>Collections & Schemas</span>
                </a>
              </li>
            
              
              <li class="item-toc ">
                <a href="data-loading.html" class="sidebar-link ">
                  <span>Data Loading</span>
                </a>
              </li>
            
              
              <li class="item-toc ">
                <a href="fragments.html" class="sidebar-link ">
                  <span>Fragments</span>
                </a>
              </li>
            
              
              <li class="item-toc ">
                <a href="terms-parameters.html" class="sidebar-link ">
                  <span>Terms & Parameters</span>
                </a>
              </li>
            
              
              <li class="item-toc ">
                <a href="mutations.html" class="sidebar-link ">
                  <span>Mutations</span>
                </a>
              </li>
            
              
              <li class="item-toc ">
                <a href="redux.html" class="sidebar-link ">
                  <span>Using Redux</span>
                </a>
              </li>
            
          </ul>
        </li>
      
        <li>
          
            <div class="heading-toc">API</div>
          
          <ul class="list-toc">
            
              
              <li class="item-toc ">
                <a href="theming.html" class="sidebar-link ">
                  <span>Components & Theming</span>
                </a>
              </li>
            
              
              <li class="item-toc ">
                <a href="core-components.html" class="sidebar-link ">
                  <span>Core Components</span>
                </a>
              </li>
            
              
              <li class="item-toc ">
                <a href="callbacks.html" class="sidebar-link ">
                  <span>Callbacks</span>
                </a>
              </li>
            
              
              <li class="item-toc ">
                <a href="users.html" class="sidebar-link ">
                  <span>Users</span>
                </a>
              </li>
            
              
              <li class="item-toc ">
                <a href="groups-permissions.html" class="sidebar-link ">
                  <span>Groups & Permissions</span>
                </a>
              </li>
            
              
              <li class="item-toc ">
                <a href="routing.html" class="sidebar-link ">
                  <span>Routing</span>
                </a>
              </li>
            
              
              <li class="item-toc ">
                <a href="internationalization.html" class="sidebar-link ">
                  <span>Internationalization</span>
                </a>
              </li>
            
              
              <li class="item-toc ">
                <a href="head-tags.html" class="sidebar-link ">
                  <span>Head Tags</span>
                </a>
              </li>
            
              
              <li class="item-toc ">
                <a href="settings.html" class="sidebar-link ">
                  <span>Settings</span>
                </a>
              </li>
            
          </ul>
        </li>
      
        <li>
          
            <div class="heading-toc">Forms</div>
          
          <ul class="list-toc">
            
              
              <li class="item-toc  current">
                <a href="" class="sidebar-link  current">
                  <span>Forms</span>
                </a>
              </li>
            
              
              <li class="item-toc ">
                <a href="forms-custom.html" class="sidebar-link ">
                  <span>Custom Form Components</span>
                </a>
              </li>
            
              
              <li class="item-toc ">
                <a href="forms-upload.html" class="sidebar-link ">
                  <span>Upload Package</span>
                </a>
              </li>
            
          </ul>
        </li>
      
        <li>
          
            <div class="heading-toc">Packages</div>
          
          <ul class="list-toc">
            
              
              <li class="item-toc ">
                <a href="email.html" class="sidebar-link ">
                  <span>Email</span>
                </a>
              </li>
            
              
              <li class="item-toc ">
                <a href="newsletter.html" class="sidebar-link ">
                  <span>Newsletter</span>
                </a>
              </li>
            
              
              <li class="item-toc ">
                <a href="payments.html" class="sidebar-link ">
                  <span>Payments</span>
                </a>
              </li>
            
              
              <li class="item-toc ">
                <a href="admin.html" class="sidebar-link ">
                  <span>Admin Dashboard</span>
                </a>
              </li>
            
              
              <li class="item-toc ">
                <a href="embed.html" class="sidebar-link ">
                  <span>Embed</span>
                </a>
              </li>
            
              
              <li class="item-toc ">
                <a href="cloudinary.html" class="sidebar-link ">
                  <span>Cloudinary</span>
                </a>
              </li>
            
              
              <li class="item-toc ">
                <a href="voting.html" class="sidebar-link ">
                  <span>Voting</span>
                </a>
              </li>
            
          </ul>
        </li>
      
        <li>
          
            <div class="heading-toc">Tutorials</div>
          
          <ul class="list-toc">
            
              
              <li class="item-toc ">
                <a href="example-simple.html" class="sidebar-link ">
                  <span>Simple Example</span>
                </a>
              </li>
            
              
              <li class="item-toc ">
                <a href="example-movies.html" class="sidebar-link ">
                  <span>Movies Example</span>
                </a>
              </li>
            
              
              <li class="item-toc ">
                <a href="example-instagram.html" class="sidebar-link ">
                  <span>Instagram Example</span>
                </a>
              </li>
            
              
              <li class="item-toc ">
                <a href="example-forum.html" class="sidebar-link ">
                  <span>Forum Example</span>
                </a>
              </li>
            
              
              <li class="item-toc ">
                <a href="example-customization.html" class="sidebar-link ">
                  <span>Customization Example</span>
                </a>
              </li>
            
              
              <li class="item-toc ">
                <a href="example-permissions.html" class="sidebar-link ">
                  <span>Permissions Example</span>
                </a>
              </li>
            
              
              <li class="item-toc ">
                <a href="sponsorship-tutorial.html" class="sidebar-link ">
                  <span>Sponsorship Flow Tutorial</span>
                </a>
              </li>
            
              
              <li class="item-toc ">
                <a href="deployment.html" class="sidebar-link ">
                  <span>Deployment Guide</span>
                </a>
              </li>
            
              
              <li class="item-toc ">
                <a href="migration.html" class="sidebar-link ">
                  <span>Migration Guide</span>
                </a>
              </li>
            
              
              <li class="item-toc ">
                <a href="recipes.html" class="sidebar-link ">
                  <span>Recipes</span>
                </a>
              </li>
            
          </ul>
        </li>
      
        <li>
          
            <div class="heading-toc">Resources</div>
          
          <ul class="list-toc">
            
              
              <li class="item-toc ">
                <a href="learn.html" class="sidebar-link ">
                  <span>Learn More</span>
                </a>
              </li>
            
              
              <li class="item-toc ">
                <a href="examples.html" class="sidebar-link ">
                  <span>Examples</span>
                </a>
              </li>
            
              
              <li class="item-toc ">
                <a href="plugins.html" class="sidebar-link ">
                  <span>Plugins</span>
                </a>
              </li>
            
              
              <li class="item-toc ">
                <a href="themes.html" class="sidebar-link ">
                  <span>Themes</span>
                </a>
              </li>
            
              
              <li class="item-toc ">
                <a href="tutorials.html" class="sidebar-link ">
                  <span>Tutorials</span>
                </a>
              </li>
            
              
              <li class="item-toc ">
                <a href="videos.html" class="sidebar-link ">
                  <span>Videos</span>
                </a>
              </li>
            
          </ul>
        </li>
      
    </ul>
  </div>
</div>

<div class="content">
  <div class="content-wrapper">
    <div class="header-content">
      <h1 class="title-page">Forms</h1>
      

      <div class="page-actions">
        <div class="actions-group">
          <a class="btn tertiary small round lowercase" href="https://github.com/vulcanjs/vulcan-docs/tree/master/source/forms.md" target="_blank"><span class="icon-github"></span> <span>Edit on GitHub</span></a>
          
        </div>
      </div>
    </div>

    <div class="document-formatting">
      <p>The <code>vulcan:forms</code> package provides a <code>SmartForm</code> component that lets you easily generate new document and edit document forms. </p>
<h2 id="Features"><a href="#Features" class="headerlink" title="Features"></a>Features</h2><p>This package can generate new document and edit document forms from a <a href="schemas.html">schema</a>. Features include:</p>
<ul>
<li>Error handling.</li>
<li>Bootstrap-compatible.</li>
<li>Cross-component communciation (prefill a field based on another).</li>
<li>Callbacks on form submission, success, and failure.</li>
<li>Support for basic form controls (input, textarea, radio, etc.).</li>
<li>Support for custom form controls.</li>
<li>Submission to Meteor methods. </li>
</ul>
<h2 id="Usage"><a href="#Usage" class="headerlink" title="Usage"></a>Usage</h2><p>Example schema:</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">import</span> BodyFormControl <span class="keyword">from</span> <span class="string">'./components/BodyFormControl.jsx'</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> isLoggedIn = <span class="function">(<span class="params">user</span>) =&gt;</span> !!user;</span><br><span class="line"><span class="keyword">const</span> isOwner = <span class="function">(<span class="params">user, <span class="built_in">document</span></span>) =&gt;</span> user._id === <span class="built_in">document</span>.userId;</span><br><span class="line"><span class="keyword">const</span> isAdmin = <span class="function">(<span class="params">user</span>) =&gt;</span> user.isAdmin;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> PostsSchema = <span class="keyword">new</span> SimpleSchema(&#123;</span><br><span class="line">  postedAt: &#123;</span><br><span class="line">    type: <span class="built_in">Date</span>,</span><br><span class="line">    optional: <span class="literal">true</span></span><br><span class="line">    <span class="comment">// no insertableBy or editableBy means this field won't appear in forms</span></span><br><span class="line">  &#125;,</span><br><span class="line">  title: &#123;</span><br><span class="line">    type: <span class="built_in">String</span>,</span><br><span class="line">    optional: <span class="literal">false</span>,</span><br><span class="line">    max: <span class="number">500</span>,</span><br><span class="line">    insertableBy: isLoggedIn,</span><br><span class="line">    editableBy: isOwner,</span><br><span class="line">    control: <span class="string">"text"</span>,</span><br><span class="line">    order: <span class="number">1</span></span><br><span class="line">  &#125;,</span><br><span class="line">  body: &#123;</span><br><span class="line">    type: <span class="built_in">String</span>,</span><br><span class="line">    optional: <span class="literal">true</span>,</span><br><span class="line">    max: <span class="number">3000</span>,</span><br><span class="line">    insertableBy: isLoggedIn,</span><br><span class="line">    editableBy: isOwner,</span><br><span class="line">    control: BodyFormControl,</span><br><span class="line">    order: <span class="number">2</span></span><br><span class="line">  &#125;,</span><br><span class="line">  sticky: &#123;</span><br><span class="line">    type: <span class="built_in">Boolean</span>,</span><br><span class="line">    optional: <span class="literal">true</span>,</span><br><span class="line">    defaultValue: <span class="literal">false</span>,</span><br><span class="line">    insertableBy: isAdmin,</span><br><span class="line">    editableBy: isAdmin,</span><br><span class="line">    control: <span class="string">"checkbox"</span>,</span><br><span class="line">    order: <span class="number">3</span></span><br><span class="line">  &#125;,</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>New document form:</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;SmartForm </span><br><span class="line">  collection=&#123;Posts&#125;</span><br><span class="line">/&gt;</span><br></pre></td></tr></table></figure>
<p>Edit document form:</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;SmartForm </span><br><span class="line">  collection=&#123;Posts&#125;</span><br><span class="line">  <span class="built_in">document</span>=&#123;post&#125;</span><br><span class="line">/&gt;</span><br></pre></td></tr></table></figure>
<h2 id="Props"><a href="#Props" class="headerlink" title="Props"></a>Props</h2><h4 id="collection"><a href="#collection" class="headerlink" title="collection"></a><code>collection</code></h4><p>The collection in which to edit or insert a document.</p>
<h4 id="documentId"><a href="#documentId" class="headerlink" title="documentId"></a><code>documentId</code></h4><p>If present, the document to edit. If not present, the form will be a “new document” form. </p>
<h4 id="submitCallback-data"><a href="#submitCallback-data" class="headerlink" title="submitCallback(data)"></a><code>submitCallback(data)</code></h4><p>A callback called on form submission on the form data. Should return the <code>data</code> object as well.</p>
<h4 id="successCallback-document"><a href="#successCallback-document" class="headerlink" title="successCallback(document)"></a><code>successCallback(document)</code></h4><p>A callback called on method success.</p>
<h4 id="errorCallback-document-error"><a href="#errorCallback-document-error" class="headerlink" title="errorCallback(document, error)"></a><code>errorCallback(document, error)</code></h4><p>A callback called on method failure.</p>
<h4 id="cancelCallback"><a href="#cancelCallback" class="headerlink" title="cancelCallback()"></a><code>cancelCallback()</code></h4><p>If provided, will show a “cancel” link next to the form’s submit button. </p>
<h4 id="prefilledProps"><a href="#prefilledProps" class="headerlink" title="prefilledProps"></a><code>prefilledProps</code></h4><p>A set of props to prefill for new documents. </p>
<h4 id="fields"><a href="#fields" class="headerlink" title="fields"></a><code>fields</code></h4><p>An array of field names, if you want to restrict the form to a specific set of fields.</p>
<h4 id="queryFragment"><a href="#queryFragment" class="headerlink" title="queryFragment"></a><code>queryFragment</code></h4><p>A GraphQL fragment used to specify the data to fetch to populate <code>edit</code> forms. </p>
<p>If no fragment is passed, SmartForms will do its best to figure out what data to load based on the fields included in the form.</p>
<h4 id="mutationFragment"><a href="#mutationFragment" class="headerlink" title="mutationFragment"></a><code>mutationFragment</code></h4><p>A GraphQL fragment used to specify the data to return once a mutation is complete. </p>
<p>If no fragment is passed, SmartForms will only return fields used in the form, but note that this might sometimes lead to discrepancies when compared with documents already loaded on the client (an example would be a <code>createdAt</code> date added automatically on creation even though it’s not part of the actual form).  </p>
<h2 id="Context"><a href="#Context" class="headerlink" title="Context"></a>Context</h2><p>The main <code>SmartForm</code> components makes the following objects available as context to all its children:</p>
<h4 id="autofilledValues"><a href="#autofilledValues" class="headerlink" title="autofilledValues"></a><code>autofilledValues</code></h4><p>An object containing optional autofilled properties. </p>
<h4 id="addToAutofilledValues-name-value"><a href="#addToAutofilledValues-name-value" class="headerlink" title="addToAutofilledValues({name: value})"></a><code>addToAutofilledValues({name: value})</code></h4><p>A function that takes a property, and adds it to the <code>autofilledValues</code> object. </p>
<h4 id="throwError-content-type"><a href="#throwError-content-type" class="headerlink" title="throwError({content, type})"></a><code>throwError({content, type})</code></h4><p>A callback function that can be used to throw an error. </p>
<h4 id="getDocument"><a href="#getDocument" class="headerlink" title="getDocument()"></a><code>getDocument()</code></h4><p>A function that lets you retrieve the current document from a form component.</p>
<h2 id="Handling-Values"><a href="#Handling-Values" class="headerlink" title="Handling Values"></a>Handling Values</h2><p>The component handles three different layers of input values:</p>
<ul>
<li>The value stored in the database (when editing a document).</li>
<li>The value being currently inputted in the form element.</li>
<li>An “autofilled” value, typically provided by an <em>other</em> form element (i.e. autofilling the post title from its URL).</li>
</ul>
<p>The highest-priority value is the user input. If there is no user input, we default to the database value provided by the <code>props</code>. And if that one is empty too, we then look for autofilled values. </p>
<h2 id="i18n"><a href="#i18n" class="headerlink" title="i18n"></a>i18n</h2><p>This package uses <a href="https://github.com/yahoo/react-intl/" target="_blank" rel="noopener">React Intl</a> to automatically translate all labels. In order to do so it expects an <code>intl</code> object ot be passed as part of its context. For example, in a parent component: </p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">getChildContext() &#123;</span><br><span class="line">  <span class="keyword">const</span> intlProvider = <span class="keyword">new</span> IntlProvider(&#123;<span class="attr">locale</span>: myLocale&#125;, myMessages);</span><br><span class="line">  <span class="keyword">const</span> &#123;intl&#125; = intlProvider.getChildContext();</span><br><span class="line">  <span class="keyword">return</span> &#123;</span><br><span class="line">    intl: intl</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="Alternative-Approach"><a href="#Alternative-Approach" class="headerlink" title="Alternative Approach"></a>Alternative Approach</h4><p>If you prefer, you can also code your own forms from scratch, either using <code>withNew</code>, <code>withEdit</code>, and <code>withRemove</code>, or with your own custom mutation HoCs. </p>

    </div>
  </div>

  <div class="pagination">
    <div class="content-wrapper">
      
      
        <a class="link primary prev"
          href="settings.html">
          <span class="icon-arrow-left-alt"></span>
          <span class="subtitle-pagination">Previous</span>
          Settings
        </a>
      
      
        <a class="link primary next"
          href="forms-custom.html">
          <span class="subtitle-pagination">Next</span>
          Custom Form Components
          <span class="icon-arrow-right-alt"></span>
        </a>
      
    </div>
  </div>

  <div class="github">
    <a class="link tertiary " href="https://github.com/vulcanjs/vulcan-docs/tree/master/source/forms.md" target="_blank">
      <span class="icon-github"></span>Edit on GitHub</a>
  </div>

  
</div>

    <script src="/script/smooth-scroll.min.js"></script>
    <script src="/script/main.js"></script>
    <script type="text/javascript" src="//cdn.jsdelivr.net/fastclick/1.0.6/fastclick.min.js"></script>


    <script>
      
    </script>

    <script type="text/javascript" src="https://cdn.jsdelivr.net/docsearch.js/2/docsearch.min.js"></script>
    <script type="text/javascript"> docsearch({
      apiKey: 'ab091fbd89cda3abd54a35c4441b3e9b',
      indexName: 'vulcanjs',
      inputSelector: '#desktop-search-input',
      debug: true // Set debug to true if you want to inspect the dropdown
    });
    </script>

  </body>
</html>
