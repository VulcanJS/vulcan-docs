<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">

    <!-- Basic -->
    <title>Deployment Guide | Vulcan Docs</title>
    <meta name="description" content="">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="shortcut icon" type="image/png" href="images/favicon.ico" sizes="16x16 32x32 64x64">

    <!-- Social -->
    <meta property="og:type" content="article">
    <meta property="og:url" content="http://docs.vulcanjs.org">
    <meta property="og:title" content="Deployment Guide | Vulcan Docs">
    <meta property="og:description" content="">
    <meta property="og:image" content="">
    <meta name="twitter:card" content="summary_image_large">
    <meta name="twitter:site" content="@vulcanjs">
    <meta name="twitter:title" content="Deployment Guide | Vulcan Docs">
    <meta name="twitter:description" content="">
    <meta name="twitter:image" content="">

    <!-- Misc -->
    <meta name="google-site-verification" content="" />
    <link href='https://fonts.googleapis.com/css?family=Source+Sans+Pro:400,300,200,300italic,400italic' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" href="/style/style.css">

    <link rel="stylesheet" href="https://cdn.jsdelivr.net/docsearch.js/2/docsearch.min.css" />


  </head>
  <body class="">
    

<div class="nav dark">
  <div class="nav-group">
    <div class="nav-item show-mobile">
      <span class="js-sidebar-toggle ">
        <span class="icon-menu"></span>
      </span>
    </div>
    <div class="nav-item">
      <a class="logo-wrapper" href="http://docs.vulcanjs.org/" title="Vulcan Documentation Vulcan Documentation"  >
        <img src="/images/vulcan-logo-border-2.svg" alt="Vulcan Documentation" class="logo"/>
        <span>Vulcan Documentation</span>
      </a>
    </div>
  </div>

  <div class="nav-group right">

    <div class="nav-item wrapper-search">
      <div class="input-symbol small round">
        <input type="text" placeholder="Search Vulcan Docs" id="desktop-search-input" />
        <span class="icon-search"></span>
      </div>
      <div class="wrapper-desktop-search-results"></div>
    </div>

    
      
      <div class="nav-item show-desktop false ">
        <a class="link" href="https://github.com/vulcanjs/vulcan"  >
          <span>GitHub</span>
        </a>
      </div>
    
      
      <div class="nav-item show-desktop false ">
        <a class="link" href="http://slack.telescopeapp.org"  >
          <span>Slack</span>
        </a>
      </div>
    
  </div>
</div>

<div class="sidebar">
  <div class="panel">
    <div class="panel-item">
      <a class="" href="http://docs.vulcanjs.org/" title="Vulcan Documentation"  >
        <span>Vulcan Documentation Vulcan Documentation</span>
      </a>
    </div>
    
      <div class="panel-item "">
        <a class="" href="https://github.com/vulcanjs/vulcan"  >
          <span>GitHub</span>
        </a>
      </div>
    
      <div class="panel-item "">
        <a class="" href="http://slack.telescopeapp.org"  >
          <span>Slack</span>
        </a>
      </div>
    
  </div>

  <div class="sidebar-content">
    <div class="topcap">
      
    </div>

    <ul class="toc">
      
        <li>
          
          <ul class="list-toc">
            
              
              <li class="item-toc ">
                <a href="index.html" class="sidebar-link ">
                  <span>Read Me</span>
                </a>
              </li>
            
          </ul>
        </li>
      
        <li>
          
            <div class="heading-toc">Overview</div>
          
          <ul class="list-toc">
            
              
              <li class="item-toc ">
                <a href="nutshell.html" class="sidebar-link ">
                  <span>Vulcan in a Nutshell</span>
                </a>
              </li>
            
              
              <li class="item-toc ">
                <a href="features.html" class="sidebar-link ">
                  <span>Features</span>
                </a>
              </li>
            
              
              <li class="item-toc ">
                <a href="architecture.html" class="sidebar-link ">
                  <span>Architecture</span>
                </a>
              </li>
            
              
              <li class="item-toc ">
                <a href="vulcan.html" class="sidebar-link ">
                  <span>From Telescope to Vulcan</span>
                </a>
              </li>
            
              
              <li class="item-toc ">
                <a href="common-problems.html" class="sidebar-link ">
                  <span>Common Problems</span>
                </a>
              </li>
            
          </ul>
        </li>
      
        <li>
          
            <div class="heading-toc">Collections</div>
          
          <ul class="list-toc">
            
              
              <li class="item-toc ">
                <a href="schemas.html" class="sidebar-link ">
                  <span>Schemas & Collections</span>
                </a>
              </li>
            
              
              <li class="item-toc ">
                <a href="graphql-schema.html" class="sidebar-link ">
                  <span>GraphQL Schema</span>
                </a>
              </li>
            
              
              <li class="item-toc ">
                <a href="field-resolvers.html" class="sidebar-link ">
                  <span>Field Resolvers</span>
                </a>
              </li>
            
              
              <li class="item-toc ">
                <a href="schema-properties.html" class="sidebar-link ">
                  <span>Schema Properties</span>
                </a>
              </li>
            
          </ul>
        </li>
      
        <li>
          
            <div class="heading-toc">Data Layer</div>
          
          <ul class="list-toc">
            
              
              <li class="item-toc ">
                <a href="resolvers.html" class="sidebar-link ">
                  <span>Resolvers</span>
                </a>
              </li>
            
              
              <li class="item-toc ">
                <a href="mutations.html" class="sidebar-link ">
                  <span>Mutations</span>
                </a>
              </li>
            
              
              <li class="item-toc ">
                <a href="fragments.html" class="sidebar-link ">
                  <span>Fragments</span>
                </a>
              </li>
            
              
              <li class="item-toc ">
                <a href="terms-parameters.html" class="sidebar-link ">
                  <span>Terms & Parameters</span>
                </a>
              </li>
            
              
              <li class="item-toc ">
                <a href="server-queries.html" class="sidebar-link ">
                  <span>Querying on the Server</span>
                </a>
              </li>
            
              
              <li class="item-toc ">
                <a href="redux.html" class="sidebar-link ">
                  <span>Using Redux</span>
                </a>
              </li>
            
              
              <li class="item-toc ">
                <a href="security.html" class="sidebar-link ">
                  <span>Security</span>
                </a>
              </li>
            
              
              <li class="item-toc ">
                <a href="performance.html" class="sidebar-link ">
                  <span>Performance</span>
                </a>
              </li>
            
              
              <li class="item-toc ">
                <a href="database.html" class="sidebar-link ">
                  <span>Database Layer</span>
                </a>
              </li>
            
              
              <li class="item-toc ">
                <a href="connecting-remotely.html" class="sidebar-link ">
                  <span>Connecting Remotely</span>
                </a>
              </li>
            
          </ul>
        </li>
      
        <li>
          
            <div class="heading-toc">API</div>
          
          <ul class="list-toc">
            
              
              <li class="item-toc ">
                <a href="theming.html" class="sidebar-link ">
                  <span>Components & Theming</span>
                </a>
              </li>
            
              
              <li class="item-toc ">
                <a href="core-components.html" class="sidebar-link ">
                  <span>Core Components</span>
                </a>
              </li>
            
              
              <li class="item-toc ">
                <a href="callbacks.html" class="sidebar-link ">
                  <span>Callbacks</span>
                </a>
              </li>
            
              
              <li class="item-toc ">
                <a href="users.html" class="sidebar-link ">
                  <span>Users</span>
                </a>
              </li>
            
              
              <li class="item-toc ">
                <a href="groups-permissions.html" class="sidebar-link ">
                  <span>Groups & Permissions</span>
                </a>
              </li>
            
              
              <li class="item-toc ">
                <a href="routing.html" class="sidebar-link ">
                  <span>Routing</span>
                </a>
              </li>
            
              
              <li class="item-toc ">
                <a href="internationalization.html" class="sidebar-link ">
                  <span>Internationalization</span>
                </a>
              </li>
            
              
              <li class="item-toc ">
                <a href="head-tags.html" class="sidebar-link ">
                  <span>Head Tags</span>
                </a>
              </li>
            
              
              <li class="item-toc ">
                <a href="settings.html" class="sidebar-link ">
                  <span>Settings</span>
                </a>
              </li>
            
          </ul>
        </li>
      
        <li>
          
            <div class="heading-toc">Forms</div>
          
          <ul class="list-toc">
            
              
              <li class="item-toc ">
                <a href="forms.html" class="sidebar-link ">
                  <span>Forms</span>
                </a>
              </li>
            
              
              <li class="item-toc ">
                <a href="forms-components.html" class="sidebar-link ">
                  <span>Form Components</span>
                </a>
              </li>
            
              
              <li class="item-toc ">
                <a href="forms-custom.html" class="sidebar-link ">
                  <span>Custom Form Components</span>
                </a>
              </li>
            
          </ul>
        </li>
      
        <li>
          
            <div class="heading-toc">Packages</div>
          
          <ul class="list-toc">
            
              
              <li class="item-toc ">
                <a href="packages.html" class="sidebar-link ">
                  <span>Packages Types</span>
                </a>
              </li>
            
              
              <li class="item-toc ">
                <a href="email.html" class="sidebar-link ">
                  <span>Email</span>
                </a>
              </li>
            
              
              <li class="item-toc ">
                <a href="newsletter.html" class="sidebar-link ">
                  <span>Newsletter</span>
                </a>
              </li>
            
              
              <li class="item-toc ">
                <a href="payments.html" class="sidebar-link ">
                  <span>Payments</span>
                </a>
              </li>
            
              
              <li class="item-toc ">
                <a href="admin.html" class="sidebar-link ">
                  <span>Admin Dashboard</span>
                </a>
              </li>
            
              
              <li class="item-toc ">
                <a href="embed.html" class="sidebar-link ">
                  <span>Embed</span>
                </a>
              </li>
            
              
              <li class="item-toc ">
                <a href="cloudinary.html" class="sidebar-link ">
                  <span>Cloudinary</span>
                </a>
              </li>
            
              
              <li class="item-toc ">
                <a href="voting.html" class="sidebar-link ">
                  <span>Voting</span>
                </a>
              </li>
            
              
              <li class="item-toc ">
                <a href="events.html" class="sidebar-link ">
                  <span>Analytics & Event Tracking</span>
                </a>
              </li>
            
              
              <li class="item-toc ">
                <a href="forms-upload.html" class="sidebar-link ">
                  <span>Upload Package</span>
                </a>
              </li>
            
          </ul>
        </li>
      
        <li>
          
            <div class="heading-toc">Tutorials</div>
          
          <ul class="list-toc">
            
              
              <li class="item-toc ">
                <a href="example-simple.html" class="sidebar-link ">
                  <span>Simple Example</span>
                </a>
              </li>
            
              
              <li class="item-toc ">
                <a href="example-movies.html" class="sidebar-link ">
                  <span>Movies Example</span>
                </a>
              </li>
            
              
              <li class="item-toc ">
                <a href="example-instagram.html" class="sidebar-link ">
                  <span>Instagram Example</span>
                </a>
              </li>
            
              
              <li class="item-toc ">
                <a href="example-forum.html" class="sidebar-link ">
                  <span>Forum Example</span>
                </a>
              </li>
            
              
              <li class="item-toc ">
                <a href="example-customization.html" class="sidebar-link ">
                  <span>Customization Example</span>
                </a>
              </li>
            
              
              <li class="item-toc ">
                <a href="example-permissions.html" class="sidebar-link ">
                  <span>Permissions Example</span>
                </a>
              </li>
            
              
              <li class="item-toc ">
                <a href="sponsorship-tutorial.html" class="sidebar-link ">
                  <span>Sponsorship Flow Tutorial</span>
                </a>
              </li>
            
              
              <li class="item-toc  current">
                <a href="" class="sidebar-link  current">
                  <span>Deployment Guide</span>
                </a>
              </li>
            
              
              <li class="item-toc ">
                <a href="recipes.html" class="sidebar-link ">
                  <span>Recipes</span>
                </a>
              </li>
            
          </ul>
        </li>
      
        <li>
          
            <div class="heading-toc">Resources</div>
          
          <ul class="list-toc">
            
              
              <li class="item-toc ">
                <a href="learn.html" class="sidebar-link ">
                  <span>Learn More</span>
                </a>
              </li>
            
              
              <li class="item-toc ">
                <a href="examples.html" class="sidebar-link ">
                  <span>Examples</span>
                </a>
              </li>
            
              
              <li class="item-toc ">
                <a href="plugins.html" class="sidebar-link ">
                  <span>Plugins</span>
                </a>
              </li>
            
              
              <li class="item-toc ">
                <a href="themes.html" class="sidebar-link ">
                  <span>Themes</span>
                </a>
              </li>
            
              
              <li class="item-toc ">
                <a href="tutorials.html" class="sidebar-link ">
                  <span>Tutorials</span>
                </a>
              </li>
            
              
              <li class="item-toc ">
                <a href="videos.html" class="sidebar-link ">
                  <span>Videos</span>
                </a>
              </li>
            
          </ul>
        </li>
      
    </ul>
  </div>
</div>

<div class="content">
  <div class="content-wrapper">
    <div class="header-content">
      <h1 class="title-page">Deployment Guide</h1>
      

      <div class="page-actions">
        <div class="actions-group">
          <a class="btn tertiary small round lowercase" href="https://github.com/vulcanjs/vulcan-docs/tree/master/source/deployment.md" target="_blank"><span class="icon-github"></span> <span>Edit on GitHub</span></a>
          
        </div>
      </div>
    </div>

    <div class="document-formatting">
      <h2 id="Meteor-Up"><a href="#Meteor-Up" class="headerlink" title="Meteor Up"></a>Meteor Up</h2><p>The recommended way to deploy Vulcan is by using <a href="https://github.com/zodern/meteor-up" target="_blank" rel="noopener">Meteor Up</a>.</p>
<h3 id="Configuration"><a href="#Configuration" class="headerlink" title="Configuration"></a>Configuration</h3><p>You should have a Linux server online, for instance <a href="https://www.digitalocean.com" target="_blank" rel="noopener">a Digital Ocean droplet running with Ubuntu</a>.</p>
<p>On your local development machine, install globally the latest <code>kadirahq/meteor-up</code>.</p>
<figure class="highlight cmake"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm <span class="keyword">install</span> -g mup</span><br></pre></td></tr></table></figure>
<p>Create Meteor Up configuration files in your project directory with <code>mup init</code>. In the example below, the configuration files are created in a <code>.deploy</code> directory at the root of your app.</p>
<figure class="highlight jboss-cli"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">cd</span> my-app-folder</span><br><span class="line">mkdir <span class="string">.deploy</span></span><br><span class="line"><span class="keyword">cd</span> <span class="string">.deploy</span></span><br><span class="line">mup init</span><br></pre></td></tr></table></figure>
<p>This will create two files :</p>
<figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">mup<span class="selector-class">.js</span> - Meteor Up configuration file</span><br><span class="line">settings<span class="selector-class">.json</span> - Settings <span class="keyword">for</span> Meteor<span class="string">'s settings API</span></span><br></pre></td></tr></table></figure>
<p>Then, replace the content of the newly created <code>settings.json</code> with your own settings (you can use the content of <code>sample_settings.json</code> as a starter).</p>
<p>Fill <code>mup.js</code> with your credentials and optional settings (check the <a href="https://github.com/kadirahq/meteor-up" target="_blank" rel="noopener">Mup repo</a> for additional docs).</p>
<p><strong>Note:</strong> the <code>ROOT_URL</code> field should be the absolute url of your deploy ; and you need to explicitly point out to use <code>abernix/meteord:base</code> docker image with a <code>docker</code> field within the <code>meteor</code> object.</p>
<figure class="highlight clean"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">...</span><br><span class="line">meteor: &#123;</span><br><span class="line">  ...</span><br><span class="line">  path: <span class="string">'../'</span> <span class="comment">// relative path of the app considering your mup config files</span></span><br><span class="line">  env: &#123;</span><br><span class="line">        ROOT_URL: <span class="string">'http://nova-app.com'</span>, <span class="comment">// absolute url of your deploy</span></span><br><span class="line">        ...</span><br><span class="line">  &#125;,</span><br><span class="line">  ...</span><br><span class="line">  docker: &#123;</span><br><span class="line">        image:<span class="string">'abernix/meteord:base'</span> <span class="comment">// docker image working with meteor 1.4 &amp; node 4</span></span><br><span class="line">  &#125;,</span><br><span class="line">  ...</span><br><span class="line">&#125;,</span><br><span class="line">...</span><br></pre></td></tr></table></figure>
<p>You can take inspiration (or copy/paste) on this <a href="https://gist.github.com/xavcz/6ddc2bb6f67fe0936c8328ab3314641d" target="_blank" rel="noopener"><code>mup.js</code> example</a>.</p>
<h3 id="Setup-your-server"><a href="#Setup-your-server" class="headerlink" title="Setup your server"></a>Setup your server</h3><p>From this folder, you can now setup Docker &amp; Mongo your server with:<br><figure class="highlight arduino"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mup <span class="built_in">setup</span></span><br></pre></td></tr></table></figure></p>
<h3 id="Deploy-your-app-to-your-server"><a href="#Deploy-your-app-to-your-server" class="headerlink" title="Deploy your app to your server"></a>Deploy your app to your server</h3><p>Still in the same folder, to deploy your app with your settings file:</p>
<figure class="highlight jboss-cli"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mup <span class="keyword">deploy</span> <span class="params">--settings</span> settings.json</span><br></pre></td></tr></table></figure>
<p>If you are using the <a href="http://docs.vulcanjs.org/#Two-Repo-Install-Optional">two-repo install</a> you must specify the path to your package directory:<br><figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">METEOR_PACKAGE_DIRS</span>=<span class="string">"/Users/sacha/Vulcan/packages"</span> mup deploy --settings settings.json</span><br></pre></td></tr></table></figure></p>
<p>(Taking care to adapt the <code>/Users/sacha/Vulcan/packages</code> path to point to your Vulcan core repo’s <code>/packages</code> directory)</p>
<h3 id="Troubleshooting"><a href="#Troubleshooting" class="headerlink" title="Troubleshooting"></a>Troubleshooting</h3><ul>
<li><code>meteor npm install --save bcrypt</code>.</li>
<li>Increase <code>deployCheckWaitTime</code>.</li>
</ul>
<h2 id="Meteor-Now"><a href="#Meteor-Now" class="headerlink" title="Meteor Now"></a>Meteor Now</h2><p>Another simple option to get your app live for no cost is by using <a href="https://github.com/jkrup/meteor-now" target="_blank" rel="noopener">Meteor Now</a>.<br>Meteor-now is a tool to let you instantly deploy your Meteor apps with one command using ZEIT’s <a href="http://zeit.co/now" target="_blank" rel="noopener">▲now</a> service.</p>
<h3 id="Configuration-1"><a href="#Configuration-1" class="headerlink" title="Configuration"></a>Configuration</h3><p>Install the <code>now</code> and <code>meteor-now</code> packages:</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm <span class="keyword">install</span> -g <span class="keyword">now</span> meteor-<span class="keyword">now</span></span><br></pre></td></tr></table></figure>
<p>Create now account</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> now --login</span></span><br><span class="line"><span class="meta">&gt;</span><span class="bash"> Enter your email: &lt;your email&gt;</span></span><br><span class="line"><span class="meta">&gt;</span><span class="bash"> Please follow the link sent to &lt;your email&gt; to <span class="built_in">log</span> <span class="keyword">in</span>.</span></span><br><span class="line"><span class="meta">&gt;</span><span class="bash"> Verify that the provided security code <span class="keyword">in</span> the email matches Pragmatic Manta Ray.</span></span><br><span class="line"></span><br><span class="line">✔ Confirmed email address!</span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;</span><span class="bash"> Logged <span class="keyword">in</span> successfully. Token saved <span class="keyword">in</span> ~/.now.json</span></span><br></pre></td></tr></table></figure>
<h3 id="Deploy"><a href="#Deploy" class="headerlink" title="Deploy"></a>Deploy</h3><p>Now on your root folder, run the following command:</p>
<figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">meteor-now -d -e <span class="attribute">ROOT_URL</span>=https://mydomain.now.sh -e <span class="attribute">NODE_ENV</span>=production`</span><br></pre></td></tr></table></figure>
<p>Change <code>mydomain</code> with your custom domain name.</p>
<p>You can also add <code>-e MONGO_URL=mongodb://&lt;username&gt;:&lt;pass&gt;@....</code> for persistance storage of data. We recommend you using a service like <a href="https://mlab.com/" target="_blank" rel="noopener">mlab</a>.</p>
<p>After your deployment is done, create an alias to the domain you just specified. Just copy the hashed link provided by the now deployment. It should be copied to your clipboad. It usually follows this format: <code>https://xxxxxxxxx.now.sh</code>.</p>
<figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">now alias <span class="keyword">set</span> http<span class="variable">s:</span>//xxxxxxxxx.now.<span class="keyword">sh</span> http<span class="variable">s:</span>//mydomain.now.<span class="keyword">sh</span></span><br></pre></td></tr></table></figure>
<p>That’s it! now visit <code>https://mydomain.now.sh</code>.</p>
<p>For more info, for how to get a custom domain name run <code>now -h</code>. You may need a premium <a href="http://zeit.co/now" target="_blank" rel="noopener">now</a> account.</p>
<h2 id="PM2"><a href="#PM2" class="headerlink" title="PM2"></a>PM2</h2><p>Contributed by <a href="https://github.com/VulcanJS/Vulcan/issues/1552#issuecomment-276948862" target="_blank" rel="noopener">adalidda</a>.</p>
<p>Deploy Vulcan GraphQL/Apollo version with PM2</p>
<h3 id="Server-Setup"><a href="#Server-Setup" class="headerlink" title="Server Setup"></a>Server Setup</h3><p>On Ubuntu 14 or better.</p>
<h4 id="Install-nvm"><a href="#Install-nvm" class="headerlink" title="Install nvm"></a>Install nvm</h4><p>Run the following command</p>
<figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-<span class="built_in">get</span> <span class="keyword">update</span></span><br><span class="line">sudo apt-<span class="built_in">get</span> install build-essential libssl-dev</span><br><span class="line">curl -sL http<span class="variable">s:</span>//raw.githubusercontent.<span class="keyword">com</span>/creationix/nvm/v0.<span class="number">31.0</span>/install.<span class="keyword">sh</span> -<span class="keyword">o</span> install_nvm.<span class="keyword">sh</span></span><br><span class="line">bash install_nvm.<span class="keyword">sh</span></span><br><span class="line"><span class="keyword">source</span> ~/.<span class="keyword">profile</span></span><br><span class="line">nvm install <span class="number">4.7</span>.<span class="number">3</span></span><br><span class="line">nvm alias default <span class="number">4.7</span>.<span class="number">3</span></span><br></pre></td></tr></table></figure>
<p>Check that node 4.7.3 is your default node version, with the command <code>nvm ls</code>.</p>
<h4 id="Install-PM2"><a href="#Install-PM2" class="headerlink" title="Install PM2"></a>Install PM2</h4><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo npm <span class="selector-tag">i</span> -g pm2</span><br></pre></td></tr></table></figure>
<p>Check that your PM2 is working with the following commands:</p>
<ul>
<li><code>pm2 list</code> =&gt; list the process under PM2</li>
<li><code>pm2 -v</code> =&gt; list PM2 version</li>
</ul>
<h4 id="Install-nginx-for-the-management-of-your-host-server"><a href="#Install-nginx-for-the-management-of-your-host-server" class="headerlink" title="Install nginx for the management of your host server"></a>Install nginx for the management of your host server</h4><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-<span class="builtin-name">get</span> install nginx</span><br></pre></td></tr></table></figure>
<p>Note: I suggest to use the docker version of nginx</p>
<h3 id="Development-Setup"><a href="#Development-Setup" class="headerlink" title="Development Setup"></a>Development Setup</h3><h4 id="Install-pm2-meteor-on-your-Development-computer"><a href="#Install-pm2-meteor-on-your-Development-computer" class="headerlink" title="Install pm2-meteor on your Development computer"></a>Install pm2-meteor on your Development computer</h4><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm <span class="selector-tag">i</span> pm2-meteor -g</span><br></pre></td></tr></table></figure>
<h4 id="Create-a-deployment-folder-with-mkdir-deploy"><a href="#Create-a-deployment-folder-with-mkdir-deploy" class="headerlink" title="Create a deployment folder with mkdir deploy"></a>Create a deployment folder with mkdir deploy</h4><figure class="highlight coq"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">Cd</span> deploy</span><br></pre></td></tr></table></figure>
<p>Type the following command to init the default deployment file: <code>pm2-meteor init</code>.</p>
<p>pm2-meteor will then create a file <code>pm2-meteor.json</code>.</p>
<p>Edit your <code>pm2-meteor.json</code> with your own parameters.</p>
<p>Below is my pm2-meteor.json given as reference.</p>
<p>You note that I use the <code>nvm</code> command in my <code>pm2-meteor.json</code>, because without using the nvm command, pm2 will use Node version on your server that may be not compatible with the one required by Vulcan GraphQL/Apollo (which is node version 4.7.0 or 4.7.3) and in this case pm2 will generate high use of your CPU around 100% !</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="attr">"appName"</span>: <span class="string">"myappname"</span>,</span><br><span class="line">  <span class="attr">"appLocation"</span>: &#123;</span><br><span class="line">    <span class="attr">"local"</span>: <span class="string">"~/myappfolder"</span>,</span><br><span class="line">    <span class="attr">"branch"</span>: <span class="string">"myappbranch"</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">"meteorSettingsLocation"</span>: <span class="string">"~/myappfolder/mysettings.json"</span>,</span><br><span class="line">  <span class="attr">"meteorSettingsInRepo"</span>: <span class="literal">false</span>,</span><br><span class="line">  <span class="attr">"prebuildScript"</span>: <span class="string">"meteor add mycustompackage"</span>,</span><br><span class="line">  <span class="attr">"meteorBuildFlags"</span>: <span class="string">"--architecture os.linux.x86_64"</span>,</span><br><span class="line">  <span class="attr">"env"</span>: &#123;</span><br><span class="line">    <span class="attr">"ROOT_URL"</span>: <span class="string">"https://myurl"</span>,</span><br><span class="line">    <span class="attr">"PORT"</span>: myport,</span><br><span class="line">    <span class="attr">"MONGO_URL"</span>: <span class="string">"mongodb://username:password@ip1:port1,ip2:port2/dbname?authSource=admin&amp;replicaSet=replicasetname"</span>,</span><br><span class="line">    <span class="attr">"MONGO_OPLOG_URL"</span>: <span class="string">"mongodb://user:password@ip1:port1,ip2:port2/local?authSource=admin&amp;replicaSet=replicasetname"</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">"server"</span>: &#123;</span><br><span class="line">    <span class="attr">"host"</span>: <span class="string">"myserverip"</span>,</span><br><span class="line">    <span class="attr">"username"</span>: <span class="string">"username"</span>,</span><br><span class="line">    <span class="attr">"password"</span>: <span class="string">"mypassword"</span>,</span><br><span class="line">    <span class="attr">"deploymentDir"</span>: <span class="string">"/opt/pm2-meteor"</span>,</span><br><span class="line">    <span class="attr">"loadProfile"</span>: <span class="string">""</span>,</span><br><span class="line">    <span class="attr">"nvm"</span>: &#123;</span><br><span class="line">      <span class="attr">"bin"</span>: <span class="string">"~/.nvm/nvm.sh"</span>,</span><br><span class="line">      <span class="attr">"use"</span>: <span class="string">"4.7.2"</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">"exec_mode"</span>: <span class="string">"cluster_mode"</span>,</span><br><span class="line">    <span class="attr">"instances"</span>: <span class="number">2</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="Deploy-your-app-to-the-host-server"><a href="#Deploy-your-app-to-the-host-server" class="headerlink" title="Deploy your app to the host server"></a>Deploy your app to the host server</h4><p>Type the following command</p>
<figure class="highlight jboss-cli"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">cd</span> <span class="keyword">deploy</span></span><br><span class="line">pm2-meteor <span class="keyword">deploy</span></span><br></pre></td></tr></table></figure>
<h3 id="Useful-Commands"><a href="#Useful-Commands" class="headerlink" title="Useful Commands"></a>Useful Commands</h3><p>Type the following command to check the status of your app on the server<br><code>pm2 list</code></p>
<p>To Stop your App, type<br><code>pm2 stop myappname</code></p>
<p>To restart your App, type<br><code>pm2 restart myappname</code></p>
<p>To delete your App, type<br><code>pm2 delete myappname</code></p>
<h3 id="References"><a href="#References" class="headerlink" title="References"></a>References</h3><ul>
<li><a href="http://pm2-meteor.betawerk.co/" target="_blank" rel="noopener">How to deploy Meteor Apps with pm2-meteor</a></li>
<li><a href="https://libraries.io/npm/pm2" target="_blank" rel="noopener">pm2 2.3.1-next</a></li>
<li><a href="https://www.digitalocean.com/community/tutorials/how-to-install-node-js-on-ubuntu-16-04" target="_blank" rel="noopener">How To Install Node.js on Ubuntu 16.04</a></li>
<li><a href="https://www.coshx.com/blog/2016/08/19/how-to-deploy-a-meteor-1-4-app-to-heroku/" target="_blank" rel="noopener">Heroku deployment instructions</a></li>
</ul>
<h2 id="Other-Solutions"><a href="#Other-Solutions" class="headerlink" title="Other Solutions"></a>Other Solutions</h2><ul>
<li><a href="http://galaxy.meteor.com" target="_blank" rel="noopener">Galaxy</a></li>
<li><a href="https://scalingo.com/" target="_blank" rel="noopener">Scalingo</a></li>
</ul>

    </div>
  </div>

  <div class="pagination">
    <div class="content-wrapper">
      
      
        <a class="link primary prev"
          href="sponsorship-tutorial.html">
          <span class="icon-arrow-left-alt"></span>
          <span class="subtitle-pagination">Previous</span>
          Sponsorship Flow Tutorial
        </a>
      
      
        <a class="link primary next"
          href="recipes.html">
          <span class="subtitle-pagination">Next</span>
          Recipes
          <span class="icon-arrow-right-alt"></span>
        </a>
      
    </div>
  </div>

  <div class="github">
    <a class="link tertiary " href="https://github.com/vulcanjs/vulcan-docs/tree/master/source/deployment.md" target="_blank">
      <span class="icon-github"></span>Edit on GitHub</a>
  </div>

  
</div>

    <script src="/script/smooth-scroll.min.js"></script>
    <script src="/script/main.js"></script>
    <script type="text/javascript" src="//cdn.jsdelivr.net/fastclick/1.0.6/fastclick.min.js"></script>


    <script>
      
    </script>

    <script type="text/javascript" src="https://cdn.jsdelivr.net/docsearch.js/2/docsearch.min.js"></script>
    <script type="text/javascript"> docsearch({
      apiKey: 'ab091fbd89cda3abd54a35c4441b3e9b',
      indexName: 'vulcanjs',
      inputSelector: '#desktop-search-input',
      debug: true // Set debug to true if you want to inspect the dropdown
    });
    </script>

  </body>
</html>
